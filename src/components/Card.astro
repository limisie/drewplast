---
import { Image } from "astro:assets";
import { getDynamicImageData } from "@lib/imageImport";
import { defaultLocale } from "@i18n/ui";
import { getLocaleUrl } from "@i18n/urls";
import type { Entry } from "@lib/types";

interface Props {
  title: string;
  image: Entry;
  description?: string;
  url?: string;
}

const { image, title, description, url } = Astro.props;
const locale = Astro.currentLocale || defaultLocale;

const imageData = await getDynamicImageData(image, locale);
---

<li class:list={["card", { disabled: !url }]}>
  {url && <a href={getLocaleUrl(locale, url)} />}

  <div class="content">
    <figure class="img-wrapper">
      <Image src={imageData.import()} alt={imageData.alt} />
    </figure>

    <div>
      <h3>{title}</h3>
      {description && <p>{description}</p>}
    </div>
  </div>
</li>

<style>
  .card {
    width: 15rem;
  }

  @media (min-width: 48rem) {
    .card {
      width: 20rem;
    }
  }
</style>
