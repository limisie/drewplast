---
import { Image } from "astro:assets";
import { getDynamicImageData } from "@lib/imageImport";
import { defaultLocale } from "@i18n/ui";
import type { Entry } from "@lib/types";

interface Props {
  image: Entry;
  isCaption?: boolean;
}

const { image, isCaption = false } = Astro.props;
const locale = Astro.currentLocale || defaultLocale;

const imageData = await getDynamicImageData(image, locale);
---

<figure>
  <Image src={imageData.import()} alt={imageData.alt} />
  {isCaption && <figcaption>{imageData.caption}</figcaption>}
</figure>
