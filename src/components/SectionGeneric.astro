---
import { getRelativeLocaleUrl } from "astro:i18n";
import { getLocalizedLink } from "@lib/data";
import { defaultLocale } from "@i18n/ui";

import ImageBanner from "@components/ImageBanner.astro";

const { title, description, pageLink, image } = Astro.props;
const locale = Astro.currentLocale || defaultLocale;

const pageLinkData =
  pageLink && (await getLocalizedLink(pageLink.page, locale));
---

<section>
  <h2>{title}</h2>
  {image && <ImageBanner image={image} />}
  {description && <p>{description}</p>}
  {
    pageLink && (
      <a href={getRelativeLocaleUrl(locale, pageLinkData.url)}>
        {pageLink.text}
      </a>
    )
  }
  <div>
    <slot />
  </div>
</section>
