---
import { getLocalizedDataByEntry } from "@lib/data";
import { defaultLocale } from "@i18n/ui";

import SectionGeneric from "@components/SectionGeneric.astro";
import ElementDetails from "@components/ElementDetails.astro";

const { pipesList } = Astro.props;
const locale = Astro.currentLocale || defaultLocale;

const pipesData = await Promise.all(
  pipesList.map(async ({ pipe }) => ({
    data: await getLocalizedDataByEntry(pipe, locale),
    slug: pipe.id,
  }))
);
---

{
  pipesData.map((pipe) => (
    <SectionGeneric
      title={pipe.data.title}
    >
      <ElementDetails element={pipe.data} slug={pipe.slug} />
    </SectionGeneric>
  ))
}
