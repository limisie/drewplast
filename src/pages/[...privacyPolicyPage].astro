---
import { marked } from "marked";
import { getPageData } from "@lib/data";
import { locales } from "@i18n/ui";
import { getLocaleUrl } from "@i18n/urls";

import MainLayout from "@layouts/MainLayout.astro";
import SectionHeader from "@components/SectionHeader.astro";

export async function getStaticPaths() {
  const data = await getPageData("polityka-prywatnosci");

  return locales.map((locale) => ({
    params: {
      privacyPolicyPage: getLocaleUrl(locale, data[locale].seo.slug),
    },
    props: {
      seo: data[locale].seo,
      sectionHeader: data[locale].sectionHeader,
      content: data[locale].content,
    },
  }));
}

const { seo, sectionHeader, content } = Astro.props;
const parsedMarkdown = marked(content);
---

<MainLayout seo={seo}>
  <SectionHeader title={sectionHeader.title} eyebrow={sectionHeader.eyebrow}>
    <div set:html={parsedMarkdown} class="markdown" />
  </SectionHeader>
</MainLayout>

<style>
  .markdown {
    p,
    ol li p,
    ol ol {
      margin-block: var(--spacer);
    }

    ol ol li {
      padding-left: var(--spacer);
      margin-bottom: 0.5rem;

      &::marker {
        padding-right: 3rem;
      }
    }

    ol {
      list-style-type: decimal;
      list-style-position: inside;

      li::marker,
      li p:first-child {
        display: inline;
        font-family: var(--ff-dm-sans);
        font-size: var(--fs-l);
        font-weight: var(--fw-medium);
      }
    }

    ol ol {
      list-style-type: lower-alpha;

      li::marker {
        font-family: var(--ff-poppins);
        font-weight: var(--fw-light);
        font-size: var(--fs-s);
      }
    }
  }
</style>
