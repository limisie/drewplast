---
import { getLocalizedDataByEntry } from "@lib/data";
import { defaultLocale } from "@i18n/ui";
import type { Element } from "@lib/types";

import SectionGeneric from "@components/SectionGeneric.astro";
import ElementDetails from "@components/ElementDetails.astro";

const { pipesList } = Astro.props;
const locale = Astro.currentLocale || defaultLocale;

const pipesData = await Promise.all(
  pipesList.map(
    async (item: {pipe: Element}) => await getLocalizedDataByEntry(item.pipe, locale)
  )
);
---

{
  pipesData.map((pipe) => (
    <SectionGeneric title={pipe.title}>
      <ElementDetails element={pipe} />
    </SectionGeneric>
  ))
}
