---
import { defaultLocale } from "@i18n/ui";
import { getLocalizedDataByEntries, getLocalizedDataByEntry } from "@lib/data";

import Table from "@components/Table.astro";
import DocumentTableRows from "@components/DocumentTableRows.astro";

const { documents } = Astro.props;
const locale = Astro.currentLocale || defaultLocale;

const { documentsTableHeadings, documentsError } =
  await getLocalizedDataByEntry(
    { id: "ui", collection: "translations" },
    locale
  );

const documentsData = await getLocalizedDataByEntries(documents, locale);
const tableHeadings = documentsTableHeadings.split(",");
---

{
  documentsData.length ? (
    <Table headingsList={tableHeadings}>
      <DocumentTableRows rows={documentsData} />
    </Table>
  ) : (
    <p>{documentsError}</p>
  )
}
